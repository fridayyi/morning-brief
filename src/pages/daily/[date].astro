---
import { getCollection } from 'astro:content';
import Base from '../../layouts/Base.astro';

export async function getStaticPaths() {
  const briefs = await getCollection('daily');
  return briefs.map((brief) => ({
    params: { date: brief.data.date },
    props: { brief },
  }));
}

const { brief } = Astro.props;
const { Content } = await brief.render();
---
<Base title={`${brief.data.date} Brief`}>
  <a href={import.meta.env.BASE_URL} class="back">← 返回</a>
  <div class="day-header">
    <h1>{brief.data.date} {brief.data.weekday || ''}</h1>
    <p class="meta">AI News Brief — curated by Friday for Yi</p>
  </div>
  <article class="brief-content">
    <Content />
  </article>
</Base>

<style>
  .brief-content :global(h2) {
    font-size: 1.15rem;
    font-weight: 600;
    margin: 2rem 0 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border);
  }
  .brief-content :global(h3) {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-bright);
    margin: 1rem 0 0.4rem;
  }
  .brief-content :global(strong) {
    color: var(--accent);
    font-weight: 500;
    font-style: italic;
  }
  .brief-content :global(a) {
    color: var(--text-dim);
    text-decoration: none;
    font-size: 0.85rem;
  }
  .brief-content :global(a:hover) { color: var(--link); }
</style>
